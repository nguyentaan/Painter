{"ast":null,"code":"var _jsxFileName = \"C:\\\\Thuchanh\\\\Painter\\\\frontend\\\\src\\\\components\\\\Layout\\\\DefautLayout\\\\index.js\",\n  _s = $RefreshSig$();\nimport Header from \"./Header\";\nimport SubHeader from \"./SubHeader\";\nimport Home from \"../../../pages/Home\";\nimport Edit from \"../../../pages/Edit\";\nimport styles from \"./DefaultLayout.module.scss\";\nimport classNames from 'classnames/bind';\nimport { createContext, useState } from 'react';\nimport { useUser } from \"../../../hook/UserContext\"; // Import the useUser hook\nimport useSharedState from \"../../../hook/useShareState\";\n// import axios from 'axios';\nimport { connect } from \"react-redux\";\nimport { userLogout } from \"./\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst cx = classNames.bind(styles);\nexport const SizeContext = /*#__PURE__*/createContext();\nfunction DefaultLayout(props) {\n  _s();\n  const [selectedTool, setSelectedTool] = useState('brush');\n  const [brushWidth, setBrushWidth] = useState(5);\n  const [selectedColor, setSelectedColor] = useState('rgb(0,0,0)');\n  const [isClear, setIsClear] = useState(false);\n  const [isEdit] = useSharedState();\n  // const [isDraging, setIsDragging] = useState(false);\n\n  const [width, setWidth] = useState(1080);\n  const [height, setHeight] = useState(540);\n  const setSize = (newWidth, newHeight) => {\n    setWidth(newWidth);\n    setHeight(newHeight);\n  };\n  const {\n    userInfo,\n    logout\n  } = useUser(); // Use the useUser hook to get user, logout, and userInfo\n  const parseJwt = token => {\n    try {\n      const base64Url = token.split(\".\")[1];\n      const base64 = base64Url.replace(\"-\", \"+\").replace(\"_\", \"/\");\n      const decoded = JSON.parse(atob(base64));\n      return decoded;\n    } catch (e) {\n      console.error(\"Error parsing JWT:\", e);\n      return null;\n    }\n  };\n\n  // Usage\n  if (localStorage.getItem(\"token-user\")) {\n    var userData = parseJwt(localStorage.getItem(\"token-user\"));\n    // Now userData contains the decoded JWT payload\n  }\n\n  const handleLogout = () => {\n    props.userLogout();\n    logout();\n  };\n  const handleDownloadImage = () => {\n    const canvas = document.getElementById('myCanvas');\n    if (canvas) {\n      const timestamp = new Date().getTime();\n      const randomString = Math.random().toString(36).substring(7);\n      // Combine timestamp and random string for a unique name\n      const fileName = `drawing_${timestamp}_${randomString}.jpg`;\n      // Get the Data URL of the canvas content as a JPEG image\n      const imageDataURL = canvas.toDataURL('image/jpeg');\n      //Create a temporary link element\n      const link = document.createElement('a');\n      link.href = imageDataURL;\n      link.download = fileName;\n      link.click();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(SizeContext.Provider, {\n    value: {\n      width,\n      height,\n      setWidth,\n      setHeight,\n      setSize\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: cx('wrapper'),\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        userInfo: userInfo,\n        handleLogout: handleLogout,\n        handleDownloadImage: handleDownloadImage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(SubHeader, {\n        selectedTool: selectedTool,\n        setSelectedTool: setSelectedTool,\n        brushWidth: brushWidth,\n        setBrushWidth: setBrushWidth,\n        setSelectedColor: setSelectedColor,\n        setIsClear: setIsClear\n        // setIsDragging={setIsDragging}\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: cx('container'),\n        children: isEdit ? /*#__PURE__*/_jsxDEV(Edit, {\n          userInfo: userInfo,\n          selectedTool: selectedTool,\n          brushWidth: brushWidth,\n          selectedColor: selectedColor,\n          width: width,\n          height: height,\n          isClear: isClear,\n          setIsClear: setIsClear\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(Home, {\n          userInfo: userInfo,\n          selectedTool: selectedTool,\n          brushWidth: brushWidth,\n          selectedColor: selectedColor,\n          width: width,\n          height: height,\n          isClear: isClear,\n          setIsClear: setIsClear\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 9\n  }, this);\n}\n_s(DefaultLayout, \"O0cY5BeJnGBjSlF9Vl8S4iAOu4I=\", false, function () {\n  return [useSharedState, useUser];\n});\n_c = DefaultLayout;\nconst mapStateToProps = state => {\n  return {\n    tokenUser: state.LoginReducer.tokenUser\n  };\n};\nconst mapDispatchToProps = {\n  userLogout\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(DefaultLayout);\nvar _c;\n$RefreshReg$(_c, \"DefaultLayout\");","map":{"version":3,"names":["Header","SubHeader","Home","Edit","styles","classNames","createContext","useState","useUser","useSharedState","connect","userLogout","jsxDEV","_jsxDEV","cx","bind","SizeContext","DefaultLayout","props","_s","selectedTool","setSelectedTool","brushWidth","setBrushWidth","selectedColor","setSelectedColor","isClear","setIsClear","isEdit","width","setWidth","height","setHeight","setSize","newWidth","newHeight","userInfo","logout","parseJwt","token","base64Url","split","base64","replace","decoded","JSON","parse","atob","e","console","error","localStorage","getItem","userData","handleLogout","handleDownloadImage","canvas","document","getElementById","timestamp","Date","getTime","randomString","Math","random","toString","substring","fileName","imageDataURL","toDataURL","link","createElement","href","download","click","Provider","value","children","className","_jsxFileName","lineNumber","columnNumber","_c","mapStateToProps","state","tokenUser","LoginReducer","mapDispatchToProps","$RefreshReg$"],"sources":["C:/Thuchanh/Painter/frontend/src/components/Layout/DefautLayout/index.js"],"sourcesContent":["import Header from '~/components/Layout/DefautLayout/Header';\r\nimport SubHeader from '~/components/Layout/DefautLayout/SubHeader';\r\nimport Home from '~/pages/Home';\r\nimport Edit from '~/pages/Edit';\r\nimport styles from './DefaultLayout.module.scss';\r\nimport classNames from 'classnames/bind';\r\nimport { createContext, useState } from 'react';\r\nimport { useUser } from '../../../hook/UserContext'; // Import the useUser hook\r\nimport useSharedState from '~/hook/useShareState';\r\n// import axios from 'axios';\r\nimport { connect } from \"react-redux\";\r\nimport { userLogout } from \"./\";\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nexport const SizeContext = createContext();\r\n\r\nfunction DefaultLayout(props) {\r\n    const [selectedTool, setSelectedTool] = useState('brush');\r\n    const [brushWidth, setBrushWidth] = useState(5);\r\n    const [selectedColor, setSelectedColor] = useState('rgb(0,0,0)');\r\n    const [isClear, setIsClear] = useState(false);\r\n    const [isEdit] = useSharedState();\r\n    // const [isDraging, setIsDragging] = useState(false);\r\n\r\n    const [width, setWidth] = useState(1080);\r\n    const [height, setHeight] = useState(540);\r\n\r\n    const setSize = (newWidth, newHeight) => {\r\n        setWidth(newWidth);\r\n        setHeight(newHeight);\r\n    };\r\n\r\n    const { userInfo, logout } = useUser(); // Use the useUser hook to get user, logout, and userInfo\r\n    const parseJwt = (token) => {\r\n        try {\r\n          const base64Url = token.split(\".\")[1];\r\n          const base64 = base64Url.replace(\"-\", \"+\").replace(\"_\", \"/\");\r\n          const decoded = JSON.parse(atob(base64));\r\n          return decoded;\r\n        } catch (e) {\r\n          console.error(\"Error parsing JWT:\", e);\r\n          return null;\r\n        }\r\n      };\r\n      \r\n      // Usage\r\n      if (localStorage.getItem(\"token-user\")) {\r\n        var userData = parseJwt(localStorage.getItem(\"token-user\"));\r\n        // Now userData contains the decoded JWT payload\r\n      }\r\n    const handleLogout = () => {\r\n        props.userLogout();\r\n        logout();\r\n    };\r\n\r\n    const handleDownloadImage = () => {\r\n        const canvas = document.getElementById('myCanvas');\r\n        if (canvas) {\r\n            const timestamp = new Date().getTime();\r\n            const randomString = Math.random().toString(36).substring(7);\r\n            // Combine timestamp and random string for a unique name\r\n            const fileName = `drawing_${timestamp}_${randomString}.jpg`;\r\n            // Get the Data URL of the canvas content as a JPEG image\r\n            const imageDataURL = canvas.toDataURL('image/jpeg');\r\n            //Create a temporary link element\r\n            const link = document.createElement('a');\r\n            link.href = imageDataURL;\r\n            link.download = fileName;\r\n            link.click();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <SizeContext.Provider value={{ width, height, setWidth, setHeight, setSize }}>\r\n            <div className={cx('wrapper')}>\r\n                <Header userInfo={userInfo} handleLogout={handleLogout} handleDownloadImage={handleDownloadImage} />\r\n                <SubHeader\r\n                    selectedTool={selectedTool}\r\n                    setSelectedTool={setSelectedTool}\r\n                    brushWidth={brushWidth}\r\n                    setBrushWidth={setBrushWidth}\r\n                    setSelectedColor={setSelectedColor}\r\n                    setIsClear={setIsClear}\r\n                    // setIsDragging={setIsDragging}\r\n                />\r\n                <div className={cx('container')}>\r\n                    {isEdit ? (\r\n                        <Edit\r\n                            userInfo={userInfo}\r\n                            selectedTool={selectedTool}\r\n                            brushWidth={brushWidth}\r\n                            selectedColor={selectedColor}\r\n                            width={width}\r\n                            height={height}\r\n                            isClear={isClear}\r\n                            setIsClear={setIsClear}\r\n                        />\r\n                    ) : (\r\n                        <Home\r\n                            userInfo={userInfo}\r\n                            selectedTool={selectedTool}\r\n                            brushWidth={brushWidth}\r\n                            selectedColor={selectedColor}\r\n                            width={width}\r\n                            height={height}\r\n                            isClear={isClear}\r\n                            setIsClear={setIsClear}\r\n                        />\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </SizeContext.Provider>\r\n    );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n      tokenUser: state.LoginReducer.tokenUser,\r\n    };\r\n  };\r\n  \r\n  const mapDispatchToProps = {\r\n    userLogout,\r\n  };\r\n  export default connect(mapStateToProps, mapDispatchToProps)(DefaultLayout);\r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}