{"ast":null,"code":"var _jsxFileName = \"C:\\\\Thuchanh\\\\Painter\\\\frontend\\\\src\\\\pages\\\\Edit\\\\Edit.js\",\n  _s = $RefreshSig$();\nimport styles from \"./Edit.module.scss\";\nimport classNames from 'classnames/bind';\nimport undoAction from \"../../assets/icons/rotate-left-solid.svg\";\nimport redoAction from \"../../assets/icons/rotate-right-solid.svg\";\n// import { useUser } from '~/hook/UserContext';\n// import Konva from 'konva';\n// import { Stage, Layer, Rect, Text } from 'react-konva';\n\nimport { useEffect, useRef, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst cx = classNames.bind(styles);\nfunction Edit({\n  selectedTool,\n  brushWidth,\n  selectedColor,\n  width,\n  height,\n  isClear,\n  setIsClear\n}) {\n  _s();\n  const canvasRef = useRef(null);\n  const {\n    imageID\n  } = useParams();\n  console.log(imageID);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [prevMouseX, setPrevMouseX] = useState(null);\n  const [prevMouseY, setPrevMouseY] = useState(null);\n  const [snapshot, setSnapshot] = useState(null);\n  // const [shapes, setShapes] = useState([]); // Store drawn shapes\n  // const [selectedShape, setSelectedShape] = useState(null);\n\n  // const pathBackEnd = 'https://backendpainter-v1.onrender.com';\n  // const { userInfo, imgId } = useUser();\n  // const [imageData, setImageData] = useState(null);\n\n  // useEffect(() => {\n  //     const fetchData = async () =>{\n  //         try {\n  //             const response = await fetch (`${pathBackEnd}/${userInfo.user_id}/${imgId}`,{\n  //                 method: 'PUT',\n  //                 headers:{\n  //                     'Content-Type': 'application/json',\n  //                 },\n  //                 body: JSON.stringify({}),\n  //             });\n  //             if (response.ok){\n  //                 const data = await response.json();\n  //                 setImageData(data.image);\n  //             } else {\n  //                 console.error('Failed to fetch image');\n  //             }\n  //         } catch (error){\n  //             console.error('Error fetching image:',error);\n  //         }\n  //     }\n  //     fetchData();\n  // },[userInfo.user_id,imgId]);\n\n  const undoStack = useRef([]);\n  const redoStack = useRef([]);\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    if (context) {\n      setCanvasBackground(context);\n      setSnapshot(context.getImageData(0, 0, canvas.width, canvas.height));\n    }\n    if (isClear) {\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      clearCanvas();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isClear]);\n  const setCanvasBackground = context => {\n    context.fillStyle = '#fff';\n    context.fillRect(0, 0, context.canvas.width, context.canvas.height);\n    context.fillStyle = selectedColor;\n  };\n  const saveCanvasState = context => {\n    const canvas = context.canvas;\n    const imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n    undoStack.current.push(imageData);\n    redoStack.current = []; // Clear the redoStack after saving a new state\n  };\n\n  const undo = () => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    if (!context) return;\n    if (undoStack.current.length > 0) {\n      const lastState = undoStack.current.pop();\n      redoStack.current.push(context.getImageData(0, 0, canvas.width, canvas.height));\n      context.putImageData(lastState, 0, 0);\n    }\n  };\n  const redo = () => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    if (!context) return;\n    if (redoStack.current.length > 0) {\n      const nextState = redoStack.current.pop();\n      undoStack.current.push(context.getImageData(0, 0, canvas.width, canvas.height));\n      context.putImageData(nextState, 0, 0);\n    }\n  };\n  const startDraw = e => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    if (!context) return;\n    setIsDrawing(true);\n    setIsClear(false);\n    setPrevMouseX(e.nativeEvent.offsetX);\n    setPrevMouseY(e.nativeEvent.offsetY);\n    saveCanvasState(context);\n    context.beginPath();\n    context.lineCap = 'round';\n    context.strokeStyle = selectedColor;\n    context.lineWidth = brushWidth;\n    setSnapshot(context.getImageData(0, 0, canvas.width, canvas.height));\n  };\n  const drawing = e => {\n    if (!isDrawing) return;\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    if (!context) return;\n    context.putImageData(snapshot, 0, 0);\n    if (selectedTool === 'brush' || selectedTool === 'eraser') {\n      context.strokeStyle = selectedTool === 'eraser' ? '#fff' : selectedColor;\n      // context.moveTo(prevMouseX, prevMouseY);\n      context.lineTo(e.nativeEvent.offsetX, e.nativeEvent.offsetY);\n      context.stroke();\n    } else if (selectedTool === 'line') {\n      drawLine(context, e);\n    } else if (selectedTool === 'rectangle') {\n      drawRect(context, e);\n    } else if (selectedTool === 'triangle') {\n      drawTriangle(context, e);\n    } else if (selectedTool === 'circle') {\n      drawCircle(context, e);\n    } else if (selectedTool === 'fill') {\n      floodFill(context, getFillColor());\n    }\n  };\n  const stopDrawing = () => {\n    setIsDrawing(false);\n    updateSnapshot();\n  };\n  const drawLine = (context, e) => {\n    context.beginPath();\n    context.moveTo(prevMouseX, prevMouseY);\n    context.lineTo(e.nativeEvent.offsetX, e.nativeEvent.offsetY);\n    context.stroke();\n  };\n  const drawRect = (context, e) => {\n    const startX = Math.min(prevMouseX, e.nativeEvent.offsetX);\n    const startY = Math.min(prevMouseY, e.nativeEvent.offsetY);\n    const width = Math.abs(prevMouseX - e.nativeEvent.offsetX);\n    const height = Math.abs(prevMouseY - e.nativeEvent.offsetY);\n    context.strokeStyle = selectedColor;\n    context.strokeRect(startX, startY, width, height);\n  };\n  const drawTriangle = (context, e) => {\n    context.beginPath();\n    context.moveTo(prevMouseX, prevMouseY);\n    context.lineTo(e.nativeEvent.offsetX, e.nativeEvent.offsetY);\n    context.lineTo(prevMouseX * 2 - e.nativeEvent.offsetX, e.nativeEvent.offsetY);\n    context.closePath();\n    context.stroke();\n  };\n  const drawCircle = (context, e) => {\n    context.beginPath();\n    let radius = Math.sqrt(Math.pow(prevMouseX - e.nativeEvent.offsetX, 2) + Math.pow(prevMouseY - e.nativeEvent.offsetY, 2));\n    context.arc(prevMouseX, prevMouseY, radius, 0, 2 * Math.PI);\n    context.stroke();\n  };\n\n  // ------------Fill color----------------------------------\n  const floodFill = () => {\n    console.log('Flood Fill called');\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    const imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n    const targetColor = getPixel(imageData, prevMouseX, prevMouseY);\n    const fillColor = getFillColor();\n    console.log('Target Color:', targetColor);\n    console.log('Fill Color:', fillColor);\n    if (!colorsMatch(targetColor, fillColor, 30)) {\n      fillPixel(imageData, prevMouseX, prevMouseY, targetColor, fillColor);\n      context.putImageData(imageData, 0, 0);\n    }\n  };\n  const getPixel = (imageData, x, y) => {\n    const index = (y * imageData.width + x) * 4;\n    return [imageData.data[index],\n    // Red component\n    imageData.data[index + 1],\n    // Green component\n    imageData.data[index + 2],\n    // Blue component\n    imageData.data[index + 3] // Alpha component\n    ];\n  };\n\n  const colorsMatch = (color1, color2) => {\n    return color1[0] === color2[0] && color1[1] === color2[1] && color1[2] === color2[2] && color1[3] === color2[3];\n  };\n  const fillPixel = (imageData, x, y, targetColor, fillColor) => {\n    // const index = (y * imageData.width + x) * 4;\n    const imageDataArray = imageData.data;\n    const queue = [];\n    queue.push([x, y]);\n    while (queue.length > 0) {\n      const [pixelX, pixelY] = queue.shift();\n      const pixelIndex = (pixelY * imageData.width + pixelX) * 4;\n      const pixelColor = [imageDataArray[pixelIndex],\n      // Red component\n      imageDataArray[pixelIndex + 1],\n      // Green component\n      imageDataArray[pixelIndex + 2],\n      // Blue component\n      imageDataArray[pixelIndex + 3] // Alpha component\n      ];\n\n      if (colorsMatch(pixelColor, targetColor)) {\n        imageDataArray[pixelIndex] = fillColor[0];\n        imageDataArray[pixelIndex + 1] = fillColor[1];\n        imageDataArray[pixelIndex + 2] = fillColor[2];\n        imageDataArray[pixelIndex + 3] = fillColor[3];\n        if (pixelX > 0) {\n          queue.push([pixelX - 1, pixelY]);\n        }\n        if (pixelX < imageData.width - 1) {\n          queue.push([pixelX + 1, pixelY]);\n        }\n        if (pixelY > 0) {\n          queue.push([pixelX, pixelY - 1]);\n        }\n        if (pixelY < imageData.height - 1) {\n          queue.push([pixelX, pixelY + 1]);\n        }\n      }\n    }\n  };\n  const getFillColor = () => {\n    const colorString = selectedColor.toLowerCase();\n    // Check for color names or hexadecimal format\n    const namedColor = nameToRGB(colorString);\n    if (namedColor) {\n      return namedColor;\n    }\n    // Check for RGB format\n    const rgbRegex = /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/;\n    const rgbMatch = colorString.match(rgbRegex);\n    if (rgbMatch) {\n      const red = parseInt(rgbMatch[1], 10);\n      const green = parseInt(rgbMatch[2], 10);\n      const blue = parseInt(rgbMatch[3], 10);\n      if (!isNaN(red) && !isNaN(green) && !isNaN(blue) && red >= 0 && red <= 255 && green >= 0 && green <= 255 && blue >= 0 && blue <= 255) {\n        return [red, green, blue, 255];\n      }\n    }\n    // Check for hexadecimal format\n    const hexRegex = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/;\n    const hexMatch = colorString.match(hexRegex);\n    if (hexMatch) {\n      const red = parseInt(hexMatch[1], 16);\n      const green = parseInt(hexMatch[2], 16);\n      const blue = parseInt(hexMatch[3], 16);\n      if (!isNaN(red) && !isNaN(green) && !isNaN(blue)) {\n        return [red, green, blue, 255];\n      }\n    }\n    // If the colorString doesn't match any expected format, return a default color (black) with a default alpha value of 255 (fully opaque)\n    return [0, 0, 0, 255];\n  };\n  // Helper function to convert color names to RGB\n  const nameToRGB = colorName => {\n    const namedColors = {\n      grey: [128, 128, 128, 255]\n      // Add more named colors as needed\n    };\n\n    const normalizedColorName = colorName.toLowerCase();\n    if (namedColors[normalizedColorName]) {\n      return namedColors[normalizedColorName];\n    }\n    return null;\n  };\n  // -------------------------------------------------------\n  const updateSnapshot = () => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    if (context) setSnapshot(context.getImageData(0, 0, canvas.width, canvas.height));\n  };\n  const clearCanvas = () => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    if (!context) return;\n    //Clear Canvas\n    context.clearRect(0, 0, canvas.width, canvas.height);\n    setCanvasBackground(context);\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: cx('drawing-board'),\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Edit Image \", imageID]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: cx('actions'),\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: cx(styles['button'], {\n          [styles['disabled-button']]: undoStack.current.length === 0\n        }),\n        onClick: undo,\n        children: [' ', /*#__PURE__*/_jsxDEV(\"img\", {\n          src: undoAction,\n          alt: \"undo\",\n          className: cx('items')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: cx(styles['button'], {\n          [styles['disabled-button']]: redoStack.current.length === 0\n        }),\n        onClick: redo,\n        children: [' ', /*#__PURE__*/_jsxDEV(\"img\", {\n          src: redoAction,\n          alt: \"redo\",\n          className: cx('items')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      id: \"myCanvas\",\n      ref: canvasRef,\n      width: width,\n      height: height,\n      onMouseDown: startDraw,\n      onMouseMove: drawing,\n      onMouseUp: stopDrawing,\n      onMouseLeave: stopDrawing\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 338,\n    columnNumber: 9\n  }, this);\n}\n_s(Edit, \"xQqE0+BFbMCUZG3tdfE5PmZL5xQ=\", false, function () {\n  return [useParams];\n});\n_c = Edit;\nexport default Edit;\nvar _c;\n$RefreshReg$(_c, \"Edit\");","map":{"version":3,"names":["styles","classNames","undoAction","redoAction","useEffect","useRef","useState","useParams","jsxDEV","_jsxDEV","cx","bind","Edit","selectedTool","brushWidth","selectedColor","width","height","isClear","setIsClear","_s","canvasRef","imageID","console","log","isDrawing","setIsDrawing","prevMouseX","setPrevMouseX","prevMouseY","setPrevMouseY","snapshot","setSnapshot","undoStack","redoStack","canvas","current","context","getContext","setCanvasBackground","getImageData","clearCanvas","fillStyle","fillRect","saveCanvasState","imageData","push","undo","length","lastState","pop","putImageData","redo","nextState","startDraw","e","nativeEvent","offsetX","offsetY","beginPath","lineCap","strokeStyle","lineWidth","drawing","lineTo","stroke","drawLine","drawRect","drawTriangle","drawCircle","floodFill","getFillColor","stopDrawing","updateSnapshot","moveTo","startX","Math","min","startY","abs","strokeRect","closePath","radius","sqrt","pow","arc","PI","targetColor","getPixel","fillColor","colorsMatch","fillPixel","x","y","index","data","color1","color2","imageDataArray","queue","pixelX","pixelY","shift","pixelIndex","pixelColor","colorString","toLowerCase","namedColor","nameToRGB","rgbRegex","rgbMatch","match","red","parseInt","green","blue","isNaN","hexRegex","hexMatch","colorName","namedColors","grey","normalizedColorName","clearRect","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","src","alt","id","ref","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","_c","$RefreshReg$"],"sources":["C:/Thuchanh/Painter/frontend/src/pages/Edit/Edit.js"],"sourcesContent":["import styles from './Edit.module.scss';\nimport classNames from 'classnames/bind';\nimport undoAction from '~/assets/icons/rotate-left-solid.svg';\nimport redoAction from '~/assets/icons/rotate-right-solid.svg';\n// import { useUser } from '~/hook/UserContext';\n// import Konva from 'konva';\n// import { Stage, Layer, Rect, Text } from 'react-konva';\n\nimport { useEffect, useRef, useState } from 'react';\nimport { useParams } from 'react-router-dom';\n\nconst cx = classNames.bind(styles);\n\nfunction Edit({ selectedTool, brushWidth, selectedColor, width, height, isClear, setIsClear }) {\n    const canvasRef = useRef(null);\n    const {imageID} =useParams();\n    console.log(imageID);\n\n    const [isDrawing, setIsDrawing] = useState(false);\n    const [prevMouseX, setPrevMouseX] = useState(null);\n    const [prevMouseY, setPrevMouseY] = useState(null);\n    const [snapshot, setSnapshot] = useState(null);\n    // const [shapes, setShapes] = useState([]); // Store drawn shapes\n    // const [selectedShape, setSelectedShape] = useState(null);\n\n    // const pathBackEnd = 'https://backendpainter-v1.onrender.com';\n    // const { userInfo, imgId } = useUser();\n    // const [imageData, setImageData] = useState(null);\n\n    // useEffect(() => {\n    //     const fetchData = async () =>{\n    //         try {\n    //             const response = await fetch (`${pathBackEnd}/${userInfo.user_id}/${imgId}`,{\n    //                 method: 'PUT',\n    //                 headers:{\n    //                     'Content-Type': 'application/json',\n    //                 },\n    //                 body: JSON.stringify({}),\n    //             });\n    //             if (response.ok){\n    //                 const data = await response.json();\n    //                 setImageData(data.image);\n    //             } else {\n    //                 console.error('Failed to fetch image');\n    //             }\n    //         } catch (error){\n    //             console.error('Error fetching image:',error);\n    //         }\n    //     }\n    //     fetchData();\n    // },[userInfo.user_id,imgId]);\n\n    const undoStack = useRef([]);\n    const redoStack = useRef([]);\n\n    useEffect(() => {\n        const canvas = canvasRef.current;\n        const context = canvas.getContext('2d');\n\n        if (context) {\n            setCanvasBackground(context);\n            setSnapshot(context.getImageData(0, 0, canvas.width, canvas.height));\n        }\n        if (isClear) {\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n            clearCanvas();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [isClear]);\n\n    const setCanvasBackground = (context) => {\n        context.fillStyle = '#fff';\n        context.fillRect(0, 0, context.canvas.width, context.canvas.height);\n        context.fillStyle = selectedColor;\n    };\n\n    const saveCanvasState = (context) => {\n        const canvas = context.canvas;\n        const imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n        undoStack.current.push(imageData);\n        redoStack.current = []; // Clear the redoStack after saving a new state\n    };\n\n    const undo = () => {\n        const canvas = canvasRef.current;\n        const context = canvas.getContext('2d');\n        if (!context) return;\n\n        if (undoStack.current.length > 0) {\n            const lastState = undoStack.current.pop();\n            redoStack.current.push(context.getImageData(0, 0, canvas.width, canvas.height));\n            context.putImageData(lastState, 0, 0);\n        }\n    };\n\n    const redo = () => {\n        const canvas = canvasRef.current;\n        const context = canvas.getContext('2d');\n        if (!context) return;\n\n        if (redoStack.current.length > 0) {\n            const nextState = redoStack.current.pop();\n            undoStack.current.push(context.getImageData(0, 0, canvas.width, canvas.height));\n            context.putImageData(nextState, 0, 0);\n        }\n    };\n\n    const startDraw = (e) => {\n        const canvas = canvasRef.current;\n        const context = canvas.getContext('2d');\n        if (!context) return;\n\n        setIsDrawing(true);\n        setIsClear(false);\n        setPrevMouseX(e.nativeEvent.offsetX);\n        setPrevMouseY(e.nativeEvent.offsetY);\n        saveCanvasState(context);\n\n        context.beginPath();\n        context.lineCap = 'round';\n        context.strokeStyle = selectedColor;\n        context.lineWidth = brushWidth;\n        setSnapshot(context.getImageData(0, 0, canvas.width, canvas.height));\n    };\n\n    const drawing = (e) => {\n        if (!isDrawing) return;\n        const canvas = canvasRef.current;\n        const context = canvas.getContext('2d');\n        if (!context) return;\n\n        context.putImageData(snapshot, 0, 0);\n\n        if (selectedTool === 'brush' || selectedTool === 'eraser') {\n            context.strokeStyle = selectedTool === 'eraser' ? '#fff' : selectedColor;\n            // context.moveTo(prevMouseX, prevMouseY);\n            context.lineTo(e.nativeEvent.offsetX, e.nativeEvent.offsetY);\n            context.stroke();\n        } else if (selectedTool === 'line') {\n            drawLine(context, e);\n        } else if (selectedTool === 'rectangle') {\n            drawRect(context, e);\n        } else if (selectedTool === 'triangle') {\n            drawTriangle(context, e);\n        } else if (selectedTool === 'circle') {\n            drawCircle(context, e);\n        } else if (selectedTool === 'fill') {\n            floodFill(context, getFillColor());\n        }\n    };\n\n    const stopDrawing = () => {\n        setIsDrawing(false);\n        updateSnapshot();\n    };\n\n    const drawLine = (context, e) => {\n        context.beginPath();\n        context.moveTo(prevMouseX, prevMouseY);\n        context.lineTo(e.nativeEvent.offsetX, e.nativeEvent.offsetY);\n        context.stroke();\n    };\n\n    const drawRect = (context, e) => {\n        const startX = Math.min(prevMouseX, e.nativeEvent.offsetX);\n        const startY = Math.min(prevMouseY, e.nativeEvent.offsetY);\n        const width = Math.abs(prevMouseX - e.nativeEvent.offsetX);\n        const height = Math.abs(prevMouseY - e.nativeEvent.offsetY);\n\n        context.strokeStyle = selectedColor;\n        context.strokeRect(startX, startY, width, height);\n    };\n\n    const drawTriangle = (context, e) => {\n        context.beginPath();\n        context.moveTo(prevMouseX, prevMouseY);\n        context.lineTo(e.nativeEvent.offsetX, e.nativeEvent.offsetY);\n        context.lineTo(prevMouseX * 2 - e.nativeEvent.offsetX, e.nativeEvent.offsetY);\n        context.closePath();\n        context.stroke();\n    };\n\n    const drawCircle = (context, e) => {\n        context.beginPath();\n        let radius = Math.sqrt(\n            Math.pow(prevMouseX - e.nativeEvent.offsetX, 2) + Math.pow(prevMouseY - e.nativeEvent.offsetY, 2),\n        );\n        context.arc(prevMouseX, prevMouseY, radius, 0, 2 * Math.PI);\n        context.stroke();\n    };\n\n    // ------------Fill color----------------------------------\n    const floodFill = () => {\n        console.log('Flood Fill called');\n        const canvas = canvasRef.current;\n        const context = canvas.getContext('2d');\n\n        const imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n        const targetColor = getPixel(imageData, prevMouseX, prevMouseY);\n        const fillColor = getFillColor();\n\n        console.log('Target Color:', targetColor);\n        console.log('Fill Color:', fillColor);\n\n        if (!colorsMatch(targetColor, fillColor, 30)) {\n            fillPixel(imageData, prevMouseX, prevMouseY, targetColor, fillColor);\n            context.putImageData(imageData, 0, 0);\n        }\n    };\n\n    const getPixel = (imageData, x, y) => {\n        const index = (y * imageData.width + x) * 4;\n        return [\n            imageData.data[index], // Red component\n            imageData.data[index + 1], // Green component\n            imageData.data[index + 2], // Blue component\n            imageData.data[index + 3], // Alpha component\n        ];\n    };\n    const colorsMatch = (color1, color2) => {\n        return color1[0] === color2[0] && color1[1] === color2[1] && color1[2] === color2[2] && color1[3] === color2[3];\n    };\n\n    const fillPixel = (imageData, x, y, targetColor, fillColor) => {\n        // const index = (y * imageData.width + x) * 4;\n        const imageDataArray = imageData.data;\n\n        const queue = [];\n        queue.push([x, y]);\n\n        while (queue.length > 0) {\n            const [pixelX, pixelY] = queue.shift();\n            const pixelIndex = (pixelY * imageData.width + pixelX) * 4;\n            const pixelColor = [\n                imageDataArray[pixelIndex], // Red component\n                imageDataArray[pixelIndex + 1], // Green component\n                imageDataArray[pixelIndex + 2], // Blue component\n                imageDataArray[pixelIndex + 3], // Alpha component\n            ];\n\n            if (colorsMatch(pixelColor, targetColor)) {\n                imageDataArray[pixelIndex] = fillColor[0];\n                imageDataArray[pixelIndex + 1] = fillColor[1];\n                imageDataArray[pixelIndex + 2] = fillColor[2];\n                imageDataArray[pixelIndex + 3] = fillColor[3];\n\n                if (pixelX > 0) {\n                    queue.push([pixelX - 1, pixelY]);\n                }\n                if (pixelX < imageData.width - 1) {\n                    queue.push([pixelX + 1, pixelY]);\n                }\n                if (pixelY > 0) {\n                    queue.push([pixelX, pixelY - 1]);\n                }\n                if (pixelY < imageData.height - 1) {\n                    queue.push([pixelX, pixelY + 1]);\n                }\n            }\n        }\n    };\n\n    const getFillColor = () => {\n        const colorString = selectedColor.toLowerCase();\n        // Check for color names or hexadecimal format\n        const namedColor = nameToRGB(colorString);\n        if (namedColor) {\n            return namedColor;\n        }\n        // Check for RGB format\n        const rgbRegex = /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/;\n        const rgbMatch = colorString.match(rgbRegex);\n        if (rgbMatch) {\n            const red = parseInt(rgbMatch[1], 10);\n            const green = parseInt(rgbMatch[2], 10);\n            const blue = parseInt(rgbMatch[3], 10);\n\n            if (\n                !isNaN(red) &&\n                !isNaN(green) &&\n                !isNaN(blue) &&\n                red >= 0 &&\n                red <= 255 &&\n                green >= 0 &&\n                green <= 255 &&\n                blue >= 0 &&\n                blue <= 255\n            ) {\n                return [red, green, blue, 255];\n            }\n        }\n        // Check for hexadecimal format\n        const hexRegex = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/;\n        const hexMatch = colorString.match(hexRegex);\n        if (hexMatch) {\n            const red = parseInt(hexMatch[1], 16);\n            const green = parseInt(hexMatch[2], 16);\n            const blue = parseInt(hexMatch[3], 16);\n\n            if (!isNaN(red) && !isNaN(green) && !isNaN(blue)) {\n                return [red, green, blue, 255];\n            }\n        }\n        // If the colorString doesn't match any expected format, return a default color (black) with a default alpha value of 255 (fully opaque)\n        return [0, 0, 0, 255];\n    };\n    // Helper function to convert color names to RGB\n    const nameToRGB = (colorName) => {\n        const namedColors = {\n            grey: [128, 128, 128, 255],\n            // Add more named colors as needed\n        };\n\n        const normalizedColorName = colorName.toLowerCase();\n        if (namedColors[normalizedColorName]) {\n            return namedColors[normalizedColorName];\n        }\n\n        return null;\n    };\n    // -------------------------------------------------------\n    const updateSnapshot = () => {\n        const canvas = canvasRef.current;\n        const context = canvas.getContext('2d');\n        if (context) setSnapshot(context.getImageData(0, 0, canvas.width, canvas.height));\n    };\n\n    const clearCanvas = () => {\n        const canvas = canvasRef.current;\n        const context = canvas.getContext('2d');\n        if (!context) return;\n        //Clear Canvas\n        context.clearRect(0, 0, canvas.width, canvas.height);\n        setCanvasBackground(context);\n    };\n\n    return (\n        <section className={cx('drawing-board')}>\n            <h2>Edit Image {imageID}</h2>\n\n            <div className={cx('actions')}>\n                <button\n                    className={cx(styles['button'], { [styles['disabled-button']]: undoStack.current.length === 0 })}\n                    onClick={undo}\n                >\n                    {' '}\n                    <img src={undoAction} alt=\"undo\" className={cx('items')} />\n                </button>\n                <button\n                    className={cx(styles['button'], { [styles['disabled-button']]: redoStack.current.length === 0 })}\n                    onClick={redo}\n                >\n                    {' '}\n                    <img src={redoAction} alt=\"redo\" className={cx('items')} />\n                </button>\n            </div>\n            <canvas\n                id=\"myCanvas\"\n                ref={canvasRef}\n                width={width}\n                height={height}\n                onMouseDown={startDraw}\n                onMouseMove={drawing}\n                onMouseUp={stopDrawing}\n                onMouseLeave={stopDrawing}\n            ></canvas>\n        </section>\n    );\n}\n\nexport default Edit;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}